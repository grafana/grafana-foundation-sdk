# yaml-language-server: $schema=https://raw.githubusercontent.com/grafana/cog/main/schemas/compiler_passes.json

passes:
  # Ensure consistent DataSourceRef
  - replace_reference:
      from: dashboard.DataSourceRef
      to: common.DataSourceRef

  - retype_object:
      object: dashboard.DataSourceRef
      as:
        kind: ref
        ref: { referred_pkg: common, referred_type: DataSourceRef }
