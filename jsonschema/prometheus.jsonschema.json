{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$ref": "#/definitions/dataquery",
  "definitions": {
    "QueryEditorMode": {
      "enum": [
        "code",
        "builder"
      ],
      "type": "string"
    },
    "PromQueryFormat": {
      "enum": [
        "time_series",
        "table",
        "heatmap"
      ],
      "type": "string"
    },
    "dataquery": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "expr",
        "refId"
      ],
      "properties": {
        "expr": {
          "type": "string",
          "description": "The actual expression/query that will be evaluated by Prometheus"
        },
        "instant": {
          "type": "boolean",
          "description": "Returns only the latest value that Prometheus has scraped for the requested time series"
        },
        "range": {
          "type": "boolean",
          "description": "Returns a Range vector, comprised of a set of time series containing a range of data points over time for each time series"
        },
        "exemplar": {
          "type": "boolean",
          "description": "Execute an additional query to identify interesting raw samples relevant for the given expr"
        },
        "editorMode": {
          "$ref": "#/definitions/QueryEditorMode",
          "description": "Specifies which editor is being used to prepare the query. It can be \"code\" or \"builder\""
        },
        "format": {
          "$ref": "#/definitions/PromQueryFormat",
          "description": "Query format to determine how to display data points in panel. It can be \"time_series\", \"table\", \"heatmap\""
        },
        "legendFormat": {
          "type": "string",
          "description": "Series name override or template. Ex. {{hostname}} will be replaced with label value for hostname"
        },
        "intervalFactor": {
          "type": "number",
          "description": "@deprecated Used to specify how many times to divide max data points by. We use max data points under query options\nSee https://github.com/grafana/grafana/issues/48081"
        },
        "scope": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "matchers"
          ],
          "properties": {
            "matchers": {
              "type": "string"
            }
          }
        },
        "refId": {
          "type": "string",
          "description": "A unique identifier for the query within the list of targets.\nIn server side expressions, the refId is used as a variable name to identify results.\nBy default, the UI will assign A-\u003eZ; however setting meaningful names may be useful."
        },
        "hide": {
          "type": "boolean",
          "description": "true if query is disabled (ie should not be returned to the dashboard)\nNote this does not always imply that the query should not be executed since\nthe results from a hidden query may be used as the input to other queries (SSE etc)"
        },
        "queryType": {
          "type": "string",
          "description": "Specify the query flavor\nTODO make this required and give it a default"
        },
        "datasource": {
          "type": "object",
          "additionalProperties": {},
          "description": "For mixed data sources the selected datasource is on the query level.\nFor non mixed scenarios this is undefined.\nTODO find a better way to do this ^ that's friendly to schema\nTODO this shouldn't be unknown but DataSourceRef | null"
        },
        "interval": {
          "type": "string",
          "description": "An additional lower limit for the step parameter of the Prometheus query and for the\n`$__interval` and `$__rate_interval` variables."
        }
      }
    }
  }
}